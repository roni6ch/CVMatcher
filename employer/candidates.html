<div class="candidatesWrapper">
    <h3 compile-html>{{navigation}}</h3>
    <header>
        <h2>Candidates</h2>
    </header>
    <i class="fa fa-spinner fa-pulse fa-5x"></i>

    <form method="get" action="">
        <input type="text" placeholder="Find Candidate" ng-model="searchText"
               class="form-control">
    </form>
    <button type="button" class="btn btn-default"
            ng-click="sort('-compability')">Sort By Compability
    </button>
    <button type="button" class="btn btn-default" ng-click="sort('-date')">Sort
        By Date
    </button>

    <ul class="nav nav-tabs candidatesTabs" ng-init="tab=0; unreadCvs()">
        <li ng-class="{active:tab == 0}"><a ng-click="tab = 0; unreadCvs()">Unread</a></li>
        <li ng-class="{active:tab == 1}"><a ng-click="tab = 1; likedCvs()">Liked</a></li>
        <li ng-class="{active:tab == 2}"><a ng-click="tab = 2; unlikeCvs()">Unliked</a></li>
    </ul>


    <div class="tabsWrapper">
        <div ng-show="tab == 0" class="fade in active">
            <h3>{{candidates.length}} Resume's</h3>
            <!-- jobs sections -->
            <section
                    ng-repeat="candidate in candidates | filter:searchText | orderBy:sortby">
                <div class="candidates animated fadeInUp">

                    <div><a
                            href="#/Unread/{{jobId}}/resume/{{candidate._id}}"><img
                            src="./images/logo.png"></a>
                        <h5>{{candidate.sub_sector[0]}}</h5>
                    </div>
                    <div>

                        <a ng-if="tab == 0" href="#/Unread/{{jobId}}/resume/{{candidate._id}}">
                            <h3>{{candidate.user['first_name']}} {{candidate.user['last_name']}}</h3>

                            <p
                                    ng-model="searchText.sector"
                                    ng-bind-html="candidate.sector | highlight:searchText">
                                {{candidate.sector}} ,{{candidate.academy.academy_type[0]}} ,
                                {{candidate.academy.degree_type[0]}} </p>
                            <section circle id="{{ 'circle-container-' + $index }}"
                                     data-compability="{{candidate.compatibility_level}}">
                                <h5>{{candidate.compatibility_level}}%</h5>
                            </section>
                        </a>
                    </div>
                </div>
            </section>
        </div>

        <div ng-show="tab == 1" class="fade in active">
            <h3>{{likeCandidates.length}} Like Resume's</h3>
            <!-- jobs sections -->
            <section
                    ng-repeat="candidate in likeCandidates | filter:searchText | orderBy:sortby">
                <div class="candidates animated fadeInUp likeCandidates">


                    <div><a href=""><i id="candidateLike-{{candidate.google_user_id}}"  class='fa fa-thumbs-up fa-2x'
                                       ng-click='addCandidateToLike($index,candidate.google_user_id,candidate._id)'></i></a> <a
                            href="#/Like/Candidates/{{jobId}}/resume/{{candidate._id}}"><img
                            src="./images/logoSmall.png"></a><a href="" ng-click='hire(candidate._id)'><img
                            src="./images/handshake1.png"></a>
                        <article ng-repeat="subsector in candidate['sub_sector']"><h5> | {{subsector}} | </h5></article>

                    </div>
                    <div>

                        <a ng-if="tab == 1" href="#/Like/Candidates/{{jobId}}/resume/{{candidate._id}}">
                            <h3>{{candidate.user["first_name"]}} {{candidate.user["last_name"]}}</h3>

                            <p
                                    ng-model="searchText.sector"
                                    ng-bind-html="candidate.sector | highlight:searchText">
                                {{candidate.sector}} ,{{candidate.academy.academy_type[0]}} ,
                                {{candidate.academy.degree_type[0]}} </p>
                            <section circle id="{{ 'circle-container-' + $index }}"
                                     data-compability="{{candidate.compatibility_level}}">
                                <h5>{{candidate.compatibility_level}}%</h5>
                            </section>
                        </a>
                    </div>
                </div>
            </section>
        </div>
        <div ng-show="tab == 2" class="fade in active">
            <h3>{{unlikeCandidates.length}} Unlike Resume's</h3>
            <!-- jobs sections -->
            <section
                    ng-repeat="candidate in unlikeCandidates | filter:searchText | orderBy:sortby">
                <div class="candidates animated fadeInUp unlikeCandidates">
                    <div>
                        <a
                                href=""><i id="candidateLike-{{candidate.google_user_id}}"
                                           class='fa fa-thumbs-o-up fa-2x'
                                           ng-click='addCandidateToLike($index,candidate.google_user_id,candidate._id)'></i></a> <a
                            href="#/UnLike/Candidates/{{jobId}}/resume/{{candidate._id}}"><img
                            src="./images/logoSmall.png"></a>

                        <article ng-repeat="subsector in candidate['sub_sector']"><h5> | {{subsector}} | </h5></article>

                    </div>
                    <div>

                        <a ng-if="tab == 2" href="#/UnLike/Candidates/{{jobId}}/resume/{{candidate._id}}">
                            <h3>{{candidate.user["first_name"]}} {{candidate.user["last_name"]}}</h3>

                            <p
                                    ng-model="searchText.sector"
                                    ng-bind-html="candidate.sector | highlight:searchText">
                                {{candidate.sector}} ,{{candidate.academy.academy_type[0]}} ,
                                {{candidate.academy.degree_type[0]}} </p>
                            <section circle id="{{ 'circle-container-' + $index }}"
                                     data-compability="{{candidate.compatibility_level}}">
                                <h5>{{candidate.compatibility_level}}%</h5>
                            </section>
                        </a>
                    </div>
                </div>
            </section>
        </div>

    </div>
</div>

<!-- MODALS -->
<input type="hidden" class="starModal btn btn-info btn-lg"
       data-toggle="modal" data-target="#myModal"/>
<input type="hidden" class="leftModal btn btn-info btn-lg"
       data-toggle="modal" data-target="#leftModal"/>

<!-- Modal -->
<section class="modal fade" id="myModal" role="dialog">
    <div class="modal-dialog modal-sm">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Rate by Stars</h4>
            </div>
            <div class="modal-body">
                <!-- STAR RANK -->
					<span class="rating  animated pulse">
			    <input type="radio" class="rating-input" id="rating-5" ng-click="rating(5)" name="rating">
				<label for="rating-5" class="rating-star"
                       ng-style="{'background-position':'0 -16'}"></label>
				<input type="radio" class="rating-input" id="rating-4" ng-click="rating(4)" name="rating">
				<label for="rating-4" class="rating-star"
                       ng-style="{'background-position':'0 -16'}"></label>
				<input type="radio" class="rating-input" id="rating-3" ng-click="rating(3)" name="rating">
				<label for="rating-3" class="rating-star"
                       ng-style="{'background-position':'0 -16'}"></label>
				<input type="radio" class="rating-input" id="rating-2" ng-click="rating(2)" name="rating">
				<label for="rating-2" class="rating-star"
                       ng-style="{'background-position':'0 -16'}"></label>
				<input type="radio" class="rating-input" id="rating-1" ng-click="rating(1)" name="rating">
				<label for="rating-1" class="rating-star"
                       ng-style="{'background-position':'0 -16'}"></label>
			</span>

            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default bringNextCandidate" data-dismiss="modal" ng-click="bringNextCandidate('liked',null,userId)">
                    Close
                </button>
            </div>
        </div>
    </div>
</section>
<!-- Modal -->
<section class="modal fade" id="leftModal" role="dialog">
    <div class="modal-dialog modal-sm">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Description</h4>
                <h5 class="modal-title">Please type your Reason</h5>
            </div>
            <div class="modal-body">

                <div class="form-group">
				<textarea class="form-control" rows="5" name="original_text" ng-model="original_text"
                          id="comment" required></textarea>
                </div>

            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal" ng-click="bringNextCandidate('unliked',original_text,userId)">
                    Close
                </button>
            </div>
        </div>
    </div>
</section>